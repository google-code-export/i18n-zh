<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>第 3 章 高级主题</title>
<link rel="stylesheet" href="styles.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.74.3">
<link rel="home" href="index.html" title="Subversion 权威指南">
<link rel="up" href="index.html" title="Subversion 权威指南">
<link rel="prev" href="svn.tour.summary.html" title="2.8. 总结">
<link rel="next" href="svn.advanced.props.html" title="3.2. 属性">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">第 3 章 高级主题</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="svn.tour.summary.html">上一页</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="svn.advanced.props.html">下一页</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="zh">
<div class="titlepage"><div><div><h2 class="title">
<a name="svn.advanced"></a>第 3 章 高级主题</h2></div></div></div>
<div class="toc">
<p><b>目录</b></p>
<dl>
<dt><span class="sect1"><a href="svn.advanced.html#svn.tour.revs.specifiers">3.1. 版本清单</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="svn.advanced.html#svn.tour.revs.keywords">3.1.1. 修订版本关键字</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.html#svn.tour.revs.dates">3.1.2. 版本日期</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="svn.advanced.props.html">3.2. 属性</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="svn.advanced.props.html#svn.advanced.props.why">3.2.1. 为什么需要属性？</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.props.html#svn.advanced.props.manip">3.2.2. 操作属性</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.props.html#svn.advanced.props.workflow">3.2.3. 属性和 Subversion 工作流程</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.props.html#svn.advanced.props.auto">3.2.4. 自动设置属性</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="svn.advanced.props.file-portability.html">3.3. 文件移植性</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="svn.advanced.props.file-portability.html#svn.advanced.props.special.mime-type">3.3.1. 文件内容类型</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.props.file-portability.html#svn.advanced.props.special.executable">3.3.2. 文件的可执行性</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.props.file-portability.html#svn.advanced.props.special.eol-style">3.3.3. 行结束字符序列</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="svn.advanced.props.special.ignore.html">3.4. 忽略未版本控制的条目</a></span></dt>
<dt><span class="sect1"><a href="svn.advanced.props.special.keywords.html">3.5. 关键字替换</a></span></dt>
<dt><span class="sect1"><a href="svn.advanced.sparsedirs.html">3.6. 稀疏目录</a></span></dt>
<dt><span class="sect1"><a href="svn.advanced.locking.html">3.7. 锁定</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="svn.advanced.locking.html#svn.advanced.locking.creation">3.7.1. 创建锁定</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.locking.html#svn.advanced.locking.discovery">3.7.2. 发现锁定</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.locking.html#svn.advanced.locking.break-steal">3.7.3. 解除和偷窃锁定</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.locking.html#svn.advanced.locking.lock-communication">3.7.4. 锁定交流</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="svn.advanced.externals.html">3.8. 外部定义</a></span></dt>
<dt><span class="sect1"><a href="svn.advanced.pegrevs.html">3.9. Peg 和实施修订版本</a></span></dt>
<dt><span class="sect1"><a href="svn.advanced.changelists.html">3.10. 修改列表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="svn.advanced.changelists.html#svn.advanced.changelists.creating">3.10.1. 创建和更新修改列表</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.changelists.html#svn.advanced.changelists.asfilters">3.10.2. 用修改列表作为操作过滤器</a></span></dt>
<dt><span class="sect2"><a href="svn.advanced.changelists.html#svn.advanced.changelists.limitations">3.10.3. 修改列表的限制</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="svn.serverconfig.netmodel.html">3.11. 网络模型</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="svn.serverconfig.netmodel.html#svn.serverconfig.netmodel.reqresp">3.11.1. 请求和响应</a></span></dt>
<dt><span class="sect2"><a href="svn.serverconfig.netmodel.html#svn.serverconfig.netmodel.credcache">3.11.2. 客户端凭证缓存</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="svn.advanced.summary.html">3.12. 总结</a></span></dt>
</dl>
</div>
<p>If you've been reading this book chapter by chapter, from start to finish,
you should by now have acquired enough knowledge to use the Subversion
client to perform the most common version control operations.  You
understand how to check out a working copy from a Subversion repository.
You are comfortable with submitting and receiving changes using the
<span class="command"><strong>svn commit</strong></span> and <span class="command"><strong>svn update</strong></span> operations.
You've probably even developed a reflex that causes you to run the
<span class="command"><strong>svn status</strong></span> command almost unconsciously.  For all intents
and purposes, you are ready to use Subversion in a typical environment.</p>
<p>但是Subversion的特性并没有止于“<span class="quote">普通的版本控制操作</span>”，它也有一些超越了与版本库传递文件和目录修改以外的功能。</p>
<p>This chapter highlights some of Subversion's features that, while important,
aren't part of the typical user's daily routine.  It assumes that you are
familiar with Subversion's basic file and directory versioning
capabilities.  If you aren't, you'll want to first read <a class="xref" href="svn.basic.html" title="第 1 章 基本概念">第 1 章 <i>基本概念</i></a> and <a class="xref" href="svn.tour.html" title="第 2 章 基本使用">第 2 章 <i>基本使用</i></a>.  Once you've
mastered those basics and consumed this chapter, you'll be a Subversion
power user!</p>
<div class="sect1" lang="zh">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="svn.tour.revs.specifiers"></a>3.1. 版本清单</h2></div></div></div>
<p>As we described in <a class="xref" href="svn.basic.in-action.html#svn.basic.in-action.revs" title="1.3.3. 修订版本">第 1.3.3 节 “修订版本”</a>, revision
numbers in Subversion are pretty straightforward—integers that keep
getting larger as you commit more changes to your versioned data.  Still, it
doesn't take long before you can no longer remember exactly what happened in
each and every revision.  Fortunately, the typical Subversion workflow
doesn't often demand that you supply arbitrary revisions to the Subversion
operations you perform.  For operations that <span class="emphasis"><em>do</em></span> require
a revision specifier, you generally supply a revision number that you saw in
a commit email, in the output of some other Subversion operation, or in some
other context that would give meaning to that particular number.</p>
<p>But occasionally, you need to pinpoint a moment in time for which you don't
already have a revision number memorized or handy.  So besides the integer
revision numbers, <span class="command"><strong>svn</strong></span> allows as input some additional
forms of revision specifiers: <em class="firstterm">revision keywords</em> and
revision dates.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>The various forms of Subversion revision specifiers can be mixed and matched
when used to specify revision ranges.  For example, you can use <code class="option">-r
<em class="replaceable"><code>REV1</code></em>:<em class="replaceable"><code>REV2</code></em></code>
where <em class="replaceable"><code>REV1</code></em> is a revision keyword and
<em class="replaceable"><code>REV2</code></em> is a revision number, or where
<em class="replaceable"><code>REV1</code></em> is a date and
<em class="replaceable"><code>REV2</code></em> is a revision keyword, and so on.  The
individual revision specifiers are independently evaluated, so you can put
whatever you want on the opposite sides of that colon.</p></td></tr>
</table></div>
<div class="sect2" lang="zh">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.tour.revs.keywords"></a>3.1.1. 修订版本关键字</h3></div></div></div>
<a class="indexterm" name="id355481"></a><a class="indexterm" name="id355493"></a><a class="indexterm" name="id355501"></a><a class="indexterm" name="id355509"></a><a class="indexterm" name="id355518"></a><p>The Subversion client understands a number of revision keywords.  These
keywords can be used instead of integer arguments to the
<code class="option">--revision</code> (<code class="option">-r</code>) option, and are resolved
into specific revision numbers by Subversion:</p>
<div class="variablelist"><dl>
<dt><span class="term"><code class="literal">HEAD</code></span></dt>
<dd><p>版本库中最新的(或者是“<span class="quote">最年轻的</span>”)版本。</p></dd>
<dt><span class="term"><code class="literal">BASE</code></span></dt>
<dd><p>The revision number of an item in a working copy.  If the item has been
locally modified, this refers to the way the item appears without those
local modifications.</p></dd>
<dt><span class="term"><code class="literal">COMMITTED</code></span></dt>
<dd><p>项目最近修改的修订版本，与<code class="literal">BASE</code>相同或更早。</p></dd>
<dt><span class="term"><code class="literal">PREV</code></span></dt>
<dd><p>The revision immediately <span class="emphasis"><em>before</em></span> the last revision in
which an item changed.  Technically, this boils down to
<code class="literal">COMMITTED</code>−1.</p></dd>
</dl></div>
<p>As can be derived from their descriptions, the <code class="literal">PREV</code>,
<code class="literal">BASE</code>, and <code class="literal">COMMITTED</code> revision keywords
are used only when referring to a working copy path—they don't apply
to repository URLs.  <code class="literal">HEAD</code>, on the other hand, can be used
in conjunction with both of these path types.</p>
<p>下面是一些修订版本关键字的例子：</p>
<pre class="screen">
$ svn diff -r PREV:COMMITTED foo.c
# shows the last change committed to foo.c

$ svn log -r HEAD
# shows log message for the latest repository commit

$ svn diff -r HEAD
# compares your working copy (with all of its local changes) to the
# latest version of that tree in the repository

$ svn diff -r BASE:HEAD foo.c
# compares the unmodified version of foo.c with the latest version of
# foo.c in the repository

$ svn log -r BASE:HEAD
# shows all commit logs for the current versioned directory since you
# last updated

$ svn update -r PREV foo.c
# rewinds the last change on foo.c, decreasing foo.c's working revision

$ svn diff -r BASE:14 foo.c
# compares the unmodified version of foo.c with the way foo.c looked
# in revision 14
</pre>
</div>
<div class="sect2" lang="zh">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.tour.revs.dates"></a>3.1.2. 版本日期</h3></div></div></div>
<a class="indexterm" name="id355677"></a><p>Revision numbers reveal nothing about the world outside the version control
system, but sometimes you need to correlate a moment in real time with a
moment in version history.  To facilitate this, the
<code class="option">--revision</code> (<code class="option">-r</code>) option can also accept as
input date specifiers wrapped in curly braces (<code class="literal">{</code> and
<code class="literal">}</code>).  Subversion accepts the standard ISO-8601 date and
time formats, plus a few others.  Here are some examples.  (Remember to use
quotes around any date that contains spaces.)</p>
<pre class="screen">
$ svn checkout -r {2006-02-17}
$ svn checkout -r {15:30}
$ svn checkout -r {15:30:00.200000}
$ svn checkout -r {"2006-02-17 15:30"}
$ svn checkout -r {"2006-02-17 15:30 +0230"}
$ svn checkout -r {2006-02-17T15:30}
$ svn checkout -r {2006-02-17T15:30Z}
$ svn checkout -r {2006-02-17T15:30-04:00}
$ svn checkout -r {20060217T1530}
$ svn checkout -r {20060217T1530Z}
$ svn checkout -r {20060217T1530-0500}
…
</pre>
<p>当你指定一个日期，Subversion会在版本库找到接近这个日期的最近版本，并且对这个版本继续操作：</p>
<pre class="screen">
$ svn log -r {2006-11-28}
------------------------------------------------------------------------
r12 | ira | 2006-11-27 12:31:51 -0600 (Mon, 27 Nov 2006) | 6 lines
…
</pre>
<div class="sidebar">
<p class="title"><b>Subversion 会早一天吗？</b></p>
<p>If you specify a single date as a revision without specifying a time of day
(for example <code class="literal">2006-11-27</code>), you may think that Subversion
should give you the last revision that took place on the 27th of November.
Instead, you'll get back a revision from the 26th, or even earlier.
Remember that Subversion will find the <span class="emphasis"><em>most recent revision of the
repository</em></span> as of the date you give.  If you give a date without a
timestamp, such as <code class="literal">2006-11-27</code>, Subversion assumes a time
of 00:00:00, so looking for the most recent revision won't return anything
on the 27th.</p>
<p>如果你希望查询包括27号，你既可以使用(<code class="literal">{"2006-11-27
23:59"}</code>)，或是直接使用第二天(<code class="literal">{2006-11-28}</code>)。</p>
</div>
<p>You can also use a range of dates.  Subversion will find all revisions
between both dates, inclusive:</p>
<pre class="screen">
$ svn log -r {2006-11-20}:{2006-11-29}
…
</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[警告]" src="images/warning.png"></td>
<th align="left">警告</th>
</tr>
<tr><td align="left" valign="top"><p>Since the timestamp of a revision is stored as an unversioned, modifiable
property of the revision (see <a class="xref" href="svn.advanced.props.html" title="3.2. 属性">第 3.2 节 “属性”</a>),
revision timestamps can be changed to represent complete falsifications of
true chronology, or even removed altogether.  Subversion's ability to
correctly convert revision dates into real revision numbers depends on
revision datestamps maintaining a sequential ordering—the younger the
revision, the younger its timestamp.  If this ordering isn't maintained, you
will likely find that trying to use dates to specify revision ranges in your
repository doesn't always return the data you might have expected.</p></td></tr>
</table></div>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="svn.tour.summary.html">上一页</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="svn.advanced.props.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">2.8. 总结 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 3.2. 属性</td>
</tr>
</table>
</div>
</body>
</html>
