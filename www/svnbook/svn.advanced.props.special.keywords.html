<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#20851;&#38190;&#23383;&#26367;&#25442;</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.73.2"><link rel="start" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;"><link rel="up" href="svn.advanced.html" title="&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#39640;&#32423;&#20027;&#39064;"><link rel="prev" href="svn.advanced.props.special.ignore.html" title="&#24573;&#30053;&#26410;&#29256;&#26412;&#25511;&#21046;&#30340;&#26465;&#30446;"><link rel="next" href="svn.advanced.sparsedirs.html" title="Sparse Directories"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#20851;&#38190;&#23383;&#26367;&#25442;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="svn.advanced.props.special.ignore.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#39640;&#32423;&#20027;&#39064;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="svn.advanced.sparsedirs.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="section" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="svn.advanced.props.special.keywords"></a>&#20851;&#38190;&#23383;&#26367;&#25442;</h2></div></div></div><p>Subversion&#20855;&#22791;&#28155;&#21152;<em class="firstterm">&#20851;&#38190;&#23383;</em>&#30340;&#33021;&#21147;&#8212;&#19968;&#20123;&#26377;&#29992;&#30340;&#65292;&#20851;&#20110;&#29256;&#26412;&#21270;&#30340;&#25991;&#20214;&#21160;&#24577;&#20449;&#24687;&#30340;&#29255;&#26029;&#8212;&#19981;&#24517;&#30452;&#25509;&#28155;&#21152;&#21040;&#25991;&#20214;&#26412;&#36523;&#12290;&#20851;&#38190;&#23383;&#36890;&#24120;&#20250;&#29992;&#26469;&#25551;&#36848;&#25991;&#20214;&#26368;&#21518;&#19968;&#27425;&#20462;&#25913;&#30340;&#19968;&#20123;&#20449;&#24687;&#65292;&#22240;&#20026;&#36825;&#20123;&#20449;&#24687;&#27599;&#27425;&#37117;&#26377;&#25913;&#21464;&#65292;&#26356;&#37325;&#35201;&#30340;&#19968;&#28857;&#65292;&#36825;&#26159;&#22312;&#25991;&#20214;&#20462;&#25913;<span class="emphasis"><em>&#20043;&#21518;</em></span>&#65292;&#38500;&#20102;&#29256;&#26412;&#25511;&#21046;&#31995;&#32479;&#65292;&#23545;&#20110;&#20219;&#20309;&#20225;&#22270;&#20445;&#25345;&#25968;&#25454;&#26368;&#26032;&#30340;&#36807;&#31243;&#37117;&#26159;&#19968;&#22330;&#28151;&#20081;&#65292;&#20316;&#20026;&#20154;&#31867;&#20316;&#32773;&#65292;&#20449;&#24687;&#21464;&#24471;&#38472;&#26087;&#26159;&#19981;&#21487;&#36991;&#20813;&#30340;&#12290;</p><p>&#20030;&#20010;&#20363;&#23376;&#65292;&#20320;&#26377;&#19968;&#20010;&#25991;&#26723;&#24076;&#26395;&#26174;&#31034;&#26368;&#21518;&#20462;&#25913;&#30340;&#26085;&#26399;&#65292;&#20320;&#38656;&#35201;&#40635;&#28902;&#27599;&#20010;&#20316;&#32773;&#25552;&#20132;&#20043;&#21069;&#20570;&#36825;&#20214;&#20107;&#24773;&#65292;&#20063;&#35201;&#20462;&#25913;&#25991;&#26723;&#30340;&#19968;&#37096;&#20998;&#26469;&#25551;&#36848;&#20309;&#26102;&#20316;&#30340;&#20462;&#25913;&#65292;&#20294;&#26159;&#36831;&#26089;&#20250;&#26377;&#20154;&#24536;&#35760;&#20570;&#36825;&#20214;&#20107;&#65292;&#19981;&#36873;&#25321;&#31616;&#21333;&#30340;&#21578;&#35785;Subversion&#26469;&#25191;&#34892;&#26367;&#25442;<code class="literal">LastChangedDate</code>&#20851;&#38190;&#23383;&#30340;&#25805;&#20316;&#65292;&#20320;&#36890;&#36807;&#22312;&#30446;&#26631;&#20301;&#32622;&#25918;&#32622;&#19968;&#20010;<em class="firstterm">keyword anchor</em>&#26469;&#25511;&#21046;&#20851;&#38190;&#23383;&#25554;&#20837;&#30340;&#20301;&#32622;&#65292;&#36825;&#20010;anchor&#21482;&#26159;&#19968;&#20010;&#26684;&#24335;&#20026;<code class="literal">$</code><em class="replaceable"><code>KeywordName</code></em><code class="literal">$</code>&#23383;&#31526;&#20018;&#12290;</p><p>&#25152;&#26377;&#20316;&#20026;anchor&#20986;&#29616;&#22312;&#25991;&#20214;&#37324;&#30340;&#20851;&#38190;&#23383;&#26159;&#22823;&#23567;&#20889;&#25935;&#24863;&#30340;&#65306;&#20026;&#20102;&#20851;&#38190;&#23383;&#30340;&#25193;&#23637;&#65292;&#20320;&#24517;&#39035;&#20351;&#29992;&#27491;&#30830;&#30340;&#22823;&#20889;&#65292;&#20320;&#24517;&#39035;&#32771;&#34385;<code class="literal">svn:keywords</code>&#30340;&#23646;&#24615;&#20540;&#20063;&#26159;&#22823;&#23567;&#20889;&#25935;&#24863;&#8212;&#29305;&#23450;&#30340;&#20851;&#38190;&#23383;&#21517;&#20250;&#24573;&#30053;&#22823;&#23567;&#20889;&#65292;&#20294;&#26159;&#36825;&#20010;&#29305;&#24615;&#24050;&#32463;&#34987;&#24223;&#24323;&#20102;&#12290;</p><p>Subversion&#23450;&#20041;&#20102;&#29992;&#26469;&#26367;&#25442;&#30340;&#20851;&#38190;&#23383;&#21015;&#34920;&#65292;&#36825;&#20010;&#21015;&#34920;&#20445;&#23384;&#20102;&#22914;&#19979;&#20116;&#20010;&#20851;&#38190;&#23383;&#65292;&#26377;&#19968;&#20123;&#20063;&#21253;&#25324;&#20102;&#21487;&#29992;&#30340;&#21035;&#21517;&#65306;</p><div class="variablelist"><dl><dt><span class="term">
            <code class="literal">Date</code>
          </span></dt><dd><p>This keyword describes the last time the file was
            known to have been changed in the repository, and is of
            the form <code class="literal">$Date: 2006-07-22 21:42:37 -0700 (Sat,
            22 Jul 2006) $</code>.  It may also be specified as
            <code class="literal">LastChangedDate</code>.  Unlike the
            <code class="literal">Id</code> keyword, which uses UTC, the
            <code class="literal">Date</code> keyword displays dates using the
            local time zone.</p></dd><dt><span class="term">
            <code class="literal">Revision</code>
          </span></dt><dd><p>&#36825;&#20010;&#20851;&#38190;&#23383;&#25551;&#36848;&#20102;&#36825;&#20010;&#25991;&#20214;&#26368;&#21518;&#19968;&#27425;&#20462;&#25913;&#30340;&#20462;&#35746;&#29256;&#26412;&#65292;&#30475;&#36215;&#26469;&#20687;<code class="literal">$Revision$</code>&#65292;&#20063;&#21487;&#20197;&#36890;&#36807;<code class="literal">LastChangedRevision</code>&#25110;&#32773;<code class="literal">Rev</code>&#24341;&#29992;&#12290;</p></dd><dt><span class="term">
            <code class="literal">Author</code>
          </span></dt><dd><p>&#36825;&#20010;&#20851;&#38190;&#23383;&#25551;&#36848;&#20102;&#26368;&#21518;&#19968;&#20010;&#20462;&#25913;&#36825;&#20010;&#25991;&#20214;&#30340;&#29992;&#25143;&#65292;&#30475;&#36215;&#26469;&#31867;&#20284;<code class="literal">$Author$</code>&#65292;&#20063;&#21487;&#20197;&#29992;<code class="literal">LastChangedBy</code>&#26469;&#25351;&#23450;&#12290;</p></dd><dt><span class="term">
            <code class="literal">HeadURL</code>
          </span></dt><dd><p>&#36825;&#20010;&#20851;&#38190;&#23383;&#25551;&#36848;&#20102;&#36825;&#20010;&#25991;&#20214;&#22312;&#29256;&#26412;&#24211;&#26368;&#26032;&#29256;&#26412;&#30340;&#23436;&#20840;URL&#65292;&#30475;&#36215;&#26469;&#31867;&#20284;<code class="literal">$HeadURL$</code>&#65292;&#21487;&#20197;&#32553;&#20889;&#20026;<code class="literal">URL</code>&#12290;</p></dd><dt><span class="term">
            <code class="literal">Id</code>
          </span></dt><dd><p>This keyword is a compressed combination of the other
            keywords.  Its substitution looks something like
            <code class="literal">$Id: calc.c 148 2006-07-28 21:30:43Z sally
            $</code>, and is interpreted to mean that the file
            <code class="filename">calc.c</code> was last changed in revision
            148 on the evening of July 28, 2006 by the user
            <code class="literal">sally</code>.  The date displayed by this
            keyword is in UTC, unlike that of the
            <code class="literal">Date</code> keyword (which uses the local time
            zone).</p></dd></dl></div><p>Several of the previous descriptions use the phrase
      &#8220;<span class="quote">last known</span>&#8221; or similar wording.  Keep in mind that
      keyword expansion is a client-side operation, and your client
      &#8220;<span class="quote">knows</span>&#8221; only about changes that have occurred in
      the repository when you update your working copy to include
      those changes.  If you never update your working copy, your
      keywords will never expand to different values even if those
      versioned files are being changed regularly in the
      repository.</p><p>Simply adding keyword anchor text to your file does
      nothing special.  Subversion will never attempt to perform
      textual substitutions on your file contents unless
      explicitly asked to do so.  After all, you might be writing
      a document
      <sup>[<a name="d0e4919" href="#ftn.d0e4919" class="footnote">13</a>]</sup> 
      about how to use keywords, and you don't want Subversion to
      substitute your beautiful examples of unsubstituted keyword
      anchors!</p><p>To tell Subversion whether to substitute keywords
      on a particular file, we again turn to the property-related
      subcommands.  The <code class="literal">svn:keywords</code> property,
      when set on a versioned file, controls which keywords will
      be substituted on that file.  The value is a space-delimited
      list of the keyword names or aliases found in the previous
      table.</p><p>&#20030;&#20010;&#20363;&#23376;&#65292;&#20551;&#23450;&#20320;&#26377;&#19968;&#20010;&#29256;&#26412;&#21270;&#30340;&#25991;&#20214;<code class="filename">weather.txt</code>&#65292;&#20869;&#23481;&#22914;&#19979;&#65306;</p><pre class="programlisting">
Here is the latest report from the front lines.
$LastChangedDate$
$Rev$
Cumulus clouds are appearing more frequently as summer approaches.
</pre><p>&#24403;&#27809;&#26377;<code class="literal">svn:keywords</code>&#23646;&#24615;&#35774;&#32622;&#21040;&#36825;&#20010;&#25991;&#20214;&#65292;Subversion&#19981;&#20250;&#26377;&#20219;&#20309;&#29305;&#21035;&#25805;&#20316;&#65292;&#29616;&#22312;&#35753;&#25105;&#20204;&#20801;&#35768;<code class="literal">LastChangedDate</code>&#20851;&#38190;&#23383;&#30340;&#26367;&#25442;&#12290;</p><pre class="screen">
$ svn propset svn:keywords "Date Author" weather.txt
property 'svn:keywords' set on 'weather.txt'
$
</pre><p>Now you have made a local property modification on the
      <code class="filename">weather.txt</code> file.  You will see no
      changes to the file's contents (unless you made some of your
      own prior to setting the property).  Notice that the file
      contained a keyword anchor for the <code class="literal">Rev</code>
      keyword, yet we did not include that keyword in the property
      value we set.  Subversion will happily ignore requests to
      substitute keywords that are not present in the file and
      will not substitute keywords that are not present in the
      <code class="literal">svn:keywords</code> property value.</p><p>Immediately after you commit this property change,
      Subversion will update your working file with the new
      substitute text.  Instead of seeing your keyword anchor
      <code class="literal">$LastChangedDate$</code>, you'll see its
      substituted result.  That result also contains the name of
      the keyword and continues to be bounded by the dollar sign
      (<code class="literal">$</code>) characters.  And as we predicted, the
      <code class="literal">Rev</code> keyword was not substituted because
      we didn't ask for it to be.</p><p>Note also that we set the <code class="literal">svn:keywords</code>
      property to <code class="literal">Date Author</code>, yet the keyword
      anchor used the alias <code class="literal">$LastChangedDate$</code>
      and still expanded correctly:</p><pre class="screen">
Here is the latest report from the front lines.
$LastChangedDate$
$Rev$
Cumulus clouds are appearing more frequently as summer approaches.
</pre><p>If someone else now commits a change to
      <code class="filename">weather.txt</code>, your copy of that file
      will continue to display the same substituted keyword value
      as before&#8212;until you update your working copy.  At that
      time, the keywords in your <code class="filename">weather.txt</code>
      file will be resubstituted with information that
      reflects the most recent known commit to that file.</p><div class="sidebar"><p class="title"><b>$GlobalRev$&#22312;&#21738;&#37324;&#65311;</b></p><p>New users are often confused by how the
        <code class="literal">$Rev$</code> keyword works.  Since the repository
        has a single, globally increasing revision number, many people
        assume that it is this number that is reflected by the
        <code class="literal">$Rev$</code> keyword's value.  But
        <code class="literal">$Rev$</code> expands to show the last revision in
        which the file <span class="emphasis"><em>changed</em></span>, not the last
        revision to which it was updated.  Understanding this clears
        the confusion, but frustration often remains&#8212;without the
        support of a Subversion keyword to do so, how can you
        automatically get the global revision number into your
        files?</p><p>To do this, you need external processing.  Subversion
        ships with a tool called <span class="command"><strong>svnversion</strong></span>, which
        was designed for just this purpose.  It crawls your working
        copy and generates as output the revision(s) it finds.  You
        can use this program, plus some additional tooling, to embed
        that revision information into your files.  For more
        information on <span class="command"><strong>svnversion</strong></span>, see <a class="xref" href="svn.ref.svnversion.html" title="svnversion">&#8220;
          <span class="command"><strong>svnversion</strong></span>
        &#8221;&#19968;&#33410;</a>.</p></div><p>Subversion 1.2 introduced a new variant of the keyword
      syntax, which brought additional, useful&#8212;though perhaps
      atypical&#8212;functionality.  You can now tell Subversion
      to maintain a fixed length (in terms of the number of bytes
      consumed) for the substituted keyword.  By using a
      double colon (<code class="literal">::</code>) after the keyword name,
      followed by a number of space characters, you define that
      fixed width.  When Subversion goes to substitute your
      keyword for the keyword and its value, it will essentially
      replace only those space characters, leaving the overall
      width of the keyword field unchanged.  If the substituted
      value is shorter than the defined field width, there will be
      extra padding characters (spaces) at the end of the
      substituted field; if it is too long, it is truncated with a
      special hash (<code class="literal">#</code>) character just before
      the final dollar sign terminator.</p><p>&#20363;&#22914;&#65292;&#20320;&#26377;&#19968;&#31687;&#25991;&#26723;&#65292;&#20854;&#20013;&#19968;&#27573;&#26159;&#19968;&#20123;&#21453;&#26144;Subversion&#20851;&#38190;&#23383;&#30340;&#34920;&#26684;&#25968;&#25454;&#65292;&#20351;&#29992;&#21407;&#22987;&#30340;Subversion&#20851;&#38190;&#23383;&#26367;&#25442;&#35821;&#27861;&#65292;&#20320;&#30340;&#25991;&#20214;&#25110;&#35768;&#20687;&#36825;&#26679;&#65306;</p><pre class="screen">
$Rev$:     Revision of last commit
$Author$:  Author of last commit
$Date$:    Date of last commit
</pre><p>&#29616;&#22312;&#65292;&#34920;&#26684;&#30475;&#36215;&#26469;&#20343;&#28418;&#20142;&#65292;&#20294;&#26159;&#24403;&#20320;&#25552;&#20132;&#25991;&#20214;(&#24403;&#28982;&#65292;&#20851;&#38190;&#23383;&#26367;&#25442;&#21151;&#33021;&#24050;&#25171;&#24320;)&#65292;&#20320;&#20250;&#30475;&#21040;&#65306;</p><pre class="screen">
$Rev$:     Revision of last commit
$Author$:  Author of last commit
$Date$:    Date of last commit
</pre><p>The result is not so beautiful.  And you might be
      tempted to then adjust the file after the substitution so
      that it again looks tabular.  But that holds only as long as
      the keyword values are the same width.  If the last
      committed revision rolls into a new place value (say, from
      99 to 100), or if another person with a longer username
      commits the file, stuff gets all crooked again.  However, if
      you are using Subversion 1.2 or better, you can use the new
      fixed-length keyword syntax and define some field widths that
      seem sane so your file might look like this:</p><pre class="screen">
$Rev::               $:  Revision of last commit
$Author::            $:  Author of last commit
$Date::              $:  Date of last commit
</pre><p>You commit this change to your file.  This time,
      Subversion notices the new fixed-length keyword syntax and
      maintains the width of the fields as defined by the padding
      you placed between the double colon and the trailing dollar
      sign.  After substitution, the width of the fields is
      completely unchanged&#8212;the short values for
      <code class="literal">Rev</code> and <code class="literal">Author</code> are
      padded with spaces, and the long <code class="literal">Date</code>
      field is truncated by a hash character:</p><pre class="screen">
$Rev::               $:  Revision of last commit
$Author::            $:  Author of last commit
$Date::              $:  Date of last commit
</pre><p>&#22266;&#23450;&#38271;&#24230;&#20851;&#38190;&#23383;&#22312;&#25191;&#34892;&#22797;&#26434;&#25991;&#20214;&#26684;&#24335;&#30340;&#26367;&#25442;&#20013;&#38750;&#24120;&#26131;&#29992;&#65292;&#20063;&#21487;&#20197;&#22788;&#29702;&#37027;&#20123;&#24456;&#38590;&#36890;&#36807;&#20854;&#20182;&#31243;&#24207;(&#20363;&#22914;Microsoft Office&#25991;&#26723;)&#36827;&#34892;&#20462;&#25913;&#30340;&#25991;&#20214;&#12290;</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#35686;&#21578;</h3><p>Be aware that because the width of a keyword field is
        measured in bytes, the potential for corruption of
        multibyte values exists.  For example, a username that
        contains some multibyte UTF-8 characters might suffer
        truncation in the middle of the string of bytes that make
        up one of those characters.  The result will be a mere
        truncation when viewed at the byte level, but will likely
        appear as a string with an incorrect or garbled final
        character when viewed as UTF-8 text.  It is conceivable
        that certain applications, when asked to load the file,
        would notice the broken UTF-8 text and deem the entire
        file corrupt, refusing to operate on the file
        altogether.  So, when limiting keywords to a fixed size,
        choose a size that allows for this type of byte-wise
        expansion.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d0e4919" href="#d0e4919" class="para">13</a>] </sup>&#8230; &#25110;&#32773;&#21487;&#33021;&#26159;&#19968;&#26412;&#20070;&#30340;&#19968;&#20010;&#23567;&#33410; &#8230;</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="svn.advanced.props.special.ignore.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="svn.advanced.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="svn.advanced.sparsedirs.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#24573;&#30053;&#26410;&#29256;&#26412;&#25511;&#21046;&#30340;&#26465;&#30446;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;Sparse Directories</td></tr></table></div></body></html>